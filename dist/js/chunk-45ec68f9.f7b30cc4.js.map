{"version":3,"sources":["webpack:///./src/pages/category/list.vue?067a","webpack:///./src/api/category.js","webpack:///src/pages/category/list.vue","webpack:///./src/pages/category/list.vue?a329","webpack:///./src/pages/category/list.vue","webpack:///./src/pages/category/list.vue?b1c5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","type","icon","size","on","click","gotoAdd","directives","name","rawName","value","expression","data","label-class-name","class-name","label","width","prop","min-width","scopedSlots","_u","key","fn","scope","_s","statusMap","row","status","$event","gotoEdit","publish","_e","down","deleteCategory","id","total","currentChange","handleCurrentChange","title","visible","showDialog","close","reset","update:visible","ref","model","form","rules","label-position","label-width","placeholder","callback","$$v","$set","trim","min","loading","btnloading","save","staticRenderFns","getCategoryList","params","xhttp","get","getCategoryDetail","lessonID","concat","delCategory","delete","addCategory","post","updateCategory","put","publishCategory","downCategory","listvue_type_script_lang_js_","sort_val","message","required","trigger","loadingDetail","page","0","1","2","components","methods","item","_this","$confirm","confirmButtonText","cancelButtonText","then","$message","success","fetchData","catch","e","error","_this2","refreshData","val","_this3","res","finally","_this4","length","prePage","fetchDetail","beforeUpload","onUploadSuccess","code","imgUrl","media_real_url","img","media_id","msg","onUploadError","_this5","$refs","validate","valid","_this6","clearValidate","resetFields","created","category_listvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_list_vue_vue_type_style_index_0_id_ddc420ac_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_list_vue_vue_type_style_index_0_id_ddc420ac_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-45ec68f9.f7b30cc4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-Category-list\"},[_c('header',[_c('div',{staticClass:\"tips\"},[_vm._v(\"\\n            排序设定会影响在app端的展示顺序。排序规则,大的排前面，如果排序值一样，时间距离当前最近的排前面\\n        \")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"size\":\"medium\"},on:{\"click\":_vm.gotoAdd}},[_vm._v(\"新增\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.data}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label-class-name\":\"index-col\",\"class-name\":\"index-col\",\"label\":\"序号\",\"width\":\"70\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"min-width\":\"200\",\"label\":\"名称\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm.statusMap[scope.row.status]))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"sort_val\",\"label\":\"排序\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.gotoEdit(scope.row)}}},[_vm._v(\"编辑\")]),(scope.row.status === 0 || scope.row.status === 2)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.publish(scope.row)}}},[_vm._v(\"发布\")]):_vm._e(),(scope.row.status === 1)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.down(scope.row)}}},[_vm._v(\"下架\")]):_vm._e(),_c('el-button',{staticClass:\"delete\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteCategory(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('page-pagination',{attrs:{\"total\":_vm.total},on:{\"currentChange\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":!_vm.id ? '新建分类' : '编辑分类',\"width\":\"700px\",\"visible\":_vm.showDialog},on:{\"close\":_vm.reset,\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingDetail),expression:\"loadingDetail\"}],staticClass:\"Category-form\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入分类名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"sort_val\"}},[_c('el-input-number',{attrs:{\"min\":1,\"label\":\"请输入排序\"},model:{value:(_vm.form.sort_val),callback:function ($$v) {_vm.$set(_vm.form, \"sort_val\", $$v)},expression:\"form.sort_val\"}})],1)],1),_c('div',{staticClass:\"submit-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnloading,\"size\":\"medium\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import xhttp from 'src/utils/xhttp'\n\n// 获取分类列表\nexport function getCategoryList(params) {\n    return xhttp.get('/category', { params })\n}\n\n// 获取分类详情\nexport function getCategoryDetail(lessonID) {\n    return xhttp.get(`/category/${lessonID}`)\n}\n\n// 删除分类\nexport function delCategory(lessonID) {\n    return xhttp.delete(`/category/${lessonID}`)\n}\n\n// 增加分类\nexport function addCategory(params) {\n    return xhttp.post('/category', params)\n}\n\n// 更新分类\nexport function updateCategory(lessonID, params) {\n    return xhttp.put(`/category/${lessonID}`, params)\n}\n\n// 发布分类\nexport function publishCategory(id) {\n    return xhttp.put(`/category/publish/${id}`)\n}\n\n// 下架分类\nexport function downCategory(id) {\n    return xhttp.put(`/category/down/${id}`)\n}\n","<template>\n    <div class=\"page-Category-list\">\n        <header>\n            <div class=\"tips\">\n                排序设定会影响在app端的展示顺序。排序规则,大的排前面，如果排序值一样，时间距离当前最近的排前面\n            </div>\n            <!-- <el-input placeholder=\"请输入搜索信息\"\n                suffix-icon=\"el-icon-search\"\n                @keyup.enter.native=\"searchData\"\n                size=\"medium\"\n                v-model.trim=\"key\">\n            </el-input> -->\n            <el-button\n                type=\"primary\"\n                @click=\"gotoAdd\"\n                icon=\"el-icon-plus\"\n                size=\"medium\"\n                >新增</el-button\n            >\n        </header>\n        <el-table :data=\"data\" v-loading=\"loading\">\n            <el-table-column\n                type=\"index\"\n                label-class-name=\"index-col\"\n                class-name=\"index-col\"\n                label=\"序号\"\n                width=\"70\"\n            >\n            </el-table-column>\n            <el-table-column prop=\"name\" min-width=\"200\" label=\"名称\">\n            </el-table-column>\n            <el-table-column label=\"状态\">\n                <template slot-scope=\"scope\">{{\n                    statusMap[scope.row.status]\n                }}</template>\n            </el-table-column>\n            <el-table-column prop=\"sort_val\" label=\"排序\"> </el-table-column>\n            <el-table-column label=\"操作\" min-width=\"150\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"text\" @click=\"gotoEdit(scope.row)\"\n                        >编辑</el-button\n                    >\n                    <el-button\n                        type=\"text\"\n                        v-if=\"scope.row.status === 0 || scope.row.status === 2\"\n                        @click=\"publish(scope.row)\"\n                        >发布</el-button\n                    >\n                    <el-button\n                        type=\"text\"\n                        v-if=\"scope.row.status === 1\"\n                        @click=\"down(scope.row)\"\n                        >下架</el-button\n                    >\n                    <el-button\n                        type=\"text\"\n                        class=\"delete\"\n                        @click=\"deleteCategory(scope.row.id)\"\n                        >删除</el-button\n                    >\n                </template>\n            </el-table-column>\n        </el-table>\n        <page-pagination\n            @currentChange=\"handleCurrentChange\"\n            :total=\"total\"\n        ></page-pagination>\n\n        <el-dialog\n            :title=\"!id ? '新建分类' : '编辑分类'\"\n            width=\"700px\"\n            @close=\"reset\"\n            :visible.sync=\"showDialog\"\n        >\n            <div class=\"Category-form\" v-loading=\"loadingDetail\">\n                <el-form\n                    :model=\"form\"\n                    :rules=\"rules\"\n                    label-position=\"left\"\n                    label-width=\"100px\"\n                    ref=\"form\"\n                >\n                    <el-form-item label=\"分类名称\" prop=\"name\">\n                        <el-input\n                            v-model.trim=\"form.name\"\n                            placeholder=\"请输入分类名称\"\n                        ></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"排序\" prop=\"sort_val\">\n                        <el-input-number\n                            v-model=\"form.sort_val\"\n                            :min=\"1\"\n                            label=\"请输入排序\"\n                        ></el-input-number>\n                    </el-form-item>\n                </el-form>\n                <div class=\"submit-btn\">\n                    <el-button\n                        type=\"primary\"\n                        @click=\"save\"\n                        :loading=\"btnloading\"\n                        size=\"medium\"\n                        >保存</el-button\n                    >\n                </div>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport {\n    getCategoryList,\n    delCategory,\n    getCategoryDetail,\n    addCategory,\n    updateCategory,\n    publishCategory,\n    downCategory\n} from 'src/api/category'\n\nexport default {\n    data() {\n        return {\n            data: [],\n            loading: false,\n            total: 0,\n            key: '',\n            showDialog: false,\n            id: '', // 当前编辑的id\n            form: {\n                name: '', // 课程名称\n                sort_val: ''\n            },\n            rules: {\n                name: {\n                    message: '分类名称不能为空',\n                    required: true,\n                    trigger: ['blur']\n                },\n                sort_val: {\n                    message: '排序不能为空',\n                    required: true,\n                    trigger: ['blur']\n                }\n            },\n            loadingDetail: false,\n            btnloading: false,\n            page: 1,\n            statusMap: {\n                0: '待发布',\n                1: '已发布',\n                2: '已下架'\n            }\n        }\n    },\n    components: {},\n    methods: {\n        // 发布这个分类\n        publish(item) {\n            this.$confirm('请确认该分类下是否已经编辑好课程?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            })\n                .then(() => {\n                    publishCategory(item.id)\n                        .then(() => {\n                            this.$message.success('发布分类成功')\n                            this.fetchData()\n                        })\n                        .catch(e => {\n                            this.$message.error(e.message)\n                        })\n                })\n                .catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    })\n                })\n        },\n        // 下架\n        down(item) {\n            downCategory(item.id)\n                .then(() => {\n                    this.$message.success('下架分类成功')\n                    this.fetchData()\n                })\n                .catch(e => {\n                    this.$message.error(e.message)\n                })\n        },\n        refreshData() {\n            this.fetchData()\n            this.showDialog = false\n        },\n        gotoAdd() {\n            this.showDialog = true\n            this.id = ''\n        },\n        handleCurrentChange(val) {\n            this.page = val\n            this.fetchData(val)\n        },\n        fetchData(page) {\n            if (this.loading) {\n                return\n            }\n            this.loading = true\n\n            getCategoryList({\n                page: page || this.page || 1\n            })\n                .then(res => {\n                    this.data = res.data\n                    this.total = res.total\n                })\n                .catch(e => {\n                    this.$message.error(e.message)\n                })\n                .finally(() => {\n                    this.loading = false\n                })\n        },\n\n        deleteCategory(id) {\n            this.$confirm('此操作将永久删除该分类, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            })\n                .then(() => {\n                    delCategory(id)\n                        .then(() => {\n                            this.$message.success('删除分类成功')\n                            if (this.data.length === 1) {\n                                const prePage = this.page - 1\n                                this.page = prePage >= 1 ? prePage : 1\n                            }\n                            this.fetchData()\n                        })\n                        .catch(e => {\n                            this.$message.error(e.message)\n                        })\n                })\n                .catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    })\n                })\n        },\n        gotoEdit(item) {\n            this.showDialog = true\n            this.id = item.id\n            this.fetchDetail()\n        },\n        beforeUpload() {\n            //\n        },\n        onUploadSuccess(res) {\n            if (res.code === 200) {\n                this.form.imgUrl = res.data.media_real_url\n                this.form.img = res.data.media_id\n                this.$message.success('上传图片成功')\n            } else {\n                this.$message.error(`图片上传失败：${res.msg}`)\n            }\n        },\n        onUploadError() {\n            this.$message.error('图片上传失败')\n        },\n        save() {\n            this.$refs.form.validate(valid => {\n                if (valid) {\n                    if (this.btnloading) {\n                        return\n                    }\n                    this.btnloading = true\n                    if (!this.id) {\n                        addCategory(this.form)\n                            .then(() => {\n                                this.$message.success('添加成功')\n                                this.showDialog = false\n                                this.fetchData()\n                            })\n                            .catch(e => {\n                                this.$message.error(e.message)\n                            })\n                            .finally(() => {\n                                this.btnloading = false\n                            })\n                    } else {\n                        updateCategory(this.id, this.form)\n                            .then(() => {\n                                this.$message.success('保存成功')\n                                this.showDialog = false\n                                this.fetchData()\n                            })\n                            .catch(e => {\n                                this.$message.error(e.message)\n                            })\n                            .finally(() => {\n                                this.btnloading = false\n                            })\n                    }\n                }\n            })\n        },\n        fetchDetail() {\n            if (this.loadingDetail) {\n                return\n            }\n            this.loadingDetail = true\n\n            getCategoryDetail(this.id)\n                .then(res => {\n                    this.form = res\n                    this.$refs.form.clearValidate()\n                })\n                .catch(e => {\n                    this.$message.error(e.message)\n                })\n                .finally(() => {\n                    this.loadingDetail = false\n                })\n        },\n        reset() {\n            this.$refs.form && this.$refs.form.resetFields()\n        }\n    },\n    created() {\n        this.fetchData()\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '~assets/less/var.less';\n.Category-form {\n    .el-input,\n    .el-textarea,\n    .el-select {\n        width: 400px;\n    }\n}\n.submit-btn {\n    margin: 30px 0 10px;\n    text-align: right;\n    button {\n        min-width: 100px;\n    }\n}\n.page-Category-list {\n    background-color: #fff;\n    .tips {\n        color: @color-gray;\n        font-size: 12px;\n        line-height: 36px;\n    }\n    header {\n        padding: 15px 20px;\n        text-align: right;\n        display: flex;\n        justify-content: space-between;\n        .el-input {\n            width: 300px;\n        }\n    }\n    .el-button.delete {\n        color: @color-red;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=ddc420ac&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=ddc420ac&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ddc420ac\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=ddc420ac&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=ddc420ac&lang=less&scoped=true&\""],"sourceRoot":""}