{"version":3,"sources":["webpack:///./src/pages/banner/list.vue?3234","webpack:///./src/pages/banner/list.vue?3de8","webpack:///./src/api/banner.js","webpack:///src/pages/banner/list.vue","webpack:///./src/pages/banner/list.vue?2311","webpack:///./src/pages/banner/list.vue","webpack:///./src/api/common.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_list_vue_vue_type_style_index_0_id_0ce3173e_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_list_vue_vue_type_style_index_0_id_0ce3173e_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","type","icon","size","on","click","gotoAdd","_v","directives","name","rawName","value","expression","data","label-class-name","class-name","label","width","scopedSlots","_u","key","fn","scope","src","row","img_media_url","height","alt","prop","min-width","$event","gotoEdit","deleteLesson","id","total","currentChange","handleCurrentChange","title","visible","showDialog","close","resetForm","update:visible","ref","model","form","rules","label-position","label-width","placeholder","callback","$$v","$set","_l","option","action","imgData","before-upload","beforeUpload","success","onUploadSuccess","error","onUploadError","loading","btnloading","save","staticRenderFns","getBannerList","params","xhttp","get","extendUrl","getBannerDetail","lessonID","concat","delBanner","delete","addBanner","post","updateBanner","put","defaultForm","img_media_id","img_url","course_id","listvue_type_script_lang_js_","common","media_type","Object","objectSpread","message","required","trigger","options","categoryId","categoryName","loadingDetail","page","components","methods","refreshData","fetchData","val","_this","then","res","catch","e","$message","finally","_this2","$confirm","confirmButtonText","cancelButtonText","length","prePage","item","fetchDetail","code","media_real_url","media_id","msg","_this3","$refs","validate","valid","$route","_this4","clearValidate","resetFields","created","_this5","banner_listvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","d","uploadImg","getAllLesson","src_utils_xhttp__WEBPACK_IMPORTED_MODULE_0__","src_utils_httpQuery__WEBPACK_IMPORTED_MODULE_1__","src_const_baseURL__WEBPACK_IMPORTED_MODULE_2__","baseURL","getBaseURL"],"mappings":"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","file":"js/chunk-30d5c573.d349e1f9.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=0ce3173e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=0ce3173e&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-lesson-list\"},[_c('header',[_c('div'),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"size\":\"medium\"},on:{\"click\":_vm.gotoAdd}},[_vm._v(\"新增\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.data}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label-class-name\":\"index-col\",\"class-name\":\"index-col\",\"label\":\"序号\",\"width\":\"70\"}}),_c('el-table-column',{attrs:{\"width\":\"150\",\"label\":\"轮播图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.img_media_url,\"width\":\"100\",\"height\":\"100\",\"alt\":\"\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"course_name\",\"min-width\":\"200\",\"label\":\"所属课程\"}}),_c('el-table-column',{attrs:{\"prop\":\"category_name\",\"label\":\"所属分类\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.gotoEdit(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{staticClass:\"delete\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteLesson(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('page-pagination',{attrs:{\"total\":_vm.total},on:{\"currentChange\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":!_vm.id ? '新建轮播' : '编辑轮播',\"width\":\"700px\",\"visible\":_vm.showDialog},on:{\"close\":_vm.resetForm,\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingDetail),expression:\"loadingDetail\"}],staticClass:\"lesson-form\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"所属课程\",\"prop\":\"course_id\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择课程分类\"},model:{value:(_vm.form.course_id),callback:function ($$v) {_vm.$set(_vm.form, \"course_id\", $$v)},expression:\"form.course_id\"}},_vm._l((_vm.options),function(option){return _c('el-option',{key:option.id,attrs:{\"label\":option.name,\"value\":option.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"轮播图\",\"prop\":\"img_media_id\"}},[_c('img-loader',{attrs:{\"action\":_vm.action,\"data\":_vm.imgData,\"before-upload\":_vm.beforeUpload},on:{\"success\":_vm.onUploadSuccess,\"error\":_vm.onUploadError},model:{value:(_vm.form.img_url),callback:function ($$v) {_vm.$set(_vm.form, \"img_url\", $$v)},expression:\"form.img_url\"}})],1)],1),_c('div',{staticClass:\"submit-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnloading,\"size\":\"medium\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import xhttp from 'src/utils/xhttp'\nimport { extendUrl } from 'src/utils/httpQuery'\n\n// 获取轮播列表\nexport function getBannerList(params) {\n    return xhttp.get(extendUrl('/carouse'), { params })\n}\n\n// 获取轮播详情\nexport function getBannerDetail(lessonID) {\n    return xhttp.get(extendUrl(`/carouse/${lessonID}`))\n}\n\n// 删除轮播\nexport function delBanner(lessonID) {\n    return xhttp.delete(extendUrl(`/carouse/${lessonID}`))\n}\n\n// 增加轮播\nexport function addBanner(params) {\n    return xhttp.post(extendUrl('/carouse'), params)\n}\n\n// 更新轮播\nexport function updateBanner(lessonID, params) {\n    return xhttp.put(extendUrl(`/carouse/${lessonID}`), params)\n}\n","<template>\n    <div class=\"page-lesson-list\">\n        <header>\n            <div></div>\n            <!-- <el-input placeholder=\"请输入搜索信息\"\n                suffix-icon=\"el-icon-search\"\n                @keyup.enter.native=\"searchData\"\n                size=\"medium\"\n                v-model.trim=\"key\">\n            </el-input> -->\n            <el-button\n                type=\"primary\"\n                @click=\"gotoAdd\"\n                icon=\"el-icon-plus\"\n                size=\"medium\"\n                >新增</el-button\n            >\n        </header>\n        <el-table :data=\"data\" v-loading=\"loading\">\n            <el-table-column\n                type=\"index\"\n                label-class-name=\"index-col\"\n                class-name=\"index-col\"\n                label=\"序号\"\n                width=\"70\"\n            >\n            </el-table-column>\n            <el-table-column width=\"150\" label=\"轮播图片\">\n                <template slot-scope=\"scope\">\n                    <img\n                        :src=\"scope.row.img_media_url\"\n                        width=\"100\"\n                        height=\"100\"\n                        alt=\"\"\n                    />\n                </template>\n            </el-table-column>\n            <el-table-column\n                prop=\"course_name\"\n                min-width=\"200\"\n                label=\"所属课程\"\n            >\n            </el-table-column>\n            <el-table-column prop=\"category_name\" label=\"所属分类\">\n            </el-table-column>\n            <el-table-column label=\"操作\" min-width=\"150\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"text\" @click=\"gotoEdit(scope.row)\"\n                        >编辑</el-button\n                    >\n                    <el-button\n                        type=\"text\"\n                        class=\"delete\"\n                        @click=\"deleteLesson(scope.row.id)\"\n                        >删除</el-button\n                    >\n                </template>\n            </el-table-column>\n        </el-table>\n        <page-pagination\n            @currentChange=\"handleCurrentChange\"\n            :total=\"total\"\n        ></page-pagination>\n\n        <el-dialog\n            :title=\"!id ? '新建轮播' : '编辑轮播'\"\n            width=\"700px\"\n            @close=\"resetForm\"\n            :visible.sync=\"showDialog\"\n        >\n            <div class=\"lesson-form\" v-loading=\"loadingDetail\">\n                <el-form\n                    :model=\"form\"\n                    :rules=\"rules\"\n                    label-position=\"left\"\n                    label-width=\"100px\"\n                    ref=\"form\"\n                >\n                    <el-form-item label=\"所属课程\" prop=\"course_id\">\n                        <el-select\n                            v-model=\"form.course_id\"\n                            placeholder=\"请选择课程分类\"\n                        >\n                            <el-option\n                                :label=\"option.name\"\n                                v-for=\"option in options\"\n                                :key=\"option.id\"\n                                :value=\"option.id\"\n                            ></el-option>\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"轮播图\" prop=\"img_media_id\">\n                        <img-loader\n                            v-model=\"form.img_url\"\n                            :action=\"action\"\n                            :data=\"imgData\"\n                            :before-upload=\"beforeUpload\"\n                            @success=\"onUploadSuccess\"\n                            @error=\"onUploadError\"\n                        >\n                        </img-loader>\n                    </el-form-item>\n                </el-form>\n                <div class=\"submit-btn\">\n                    <el-button\n                        type=\"primary\"\n                        @click=\"save\"\n                        :loading=\"btnloading\"\n                        size=\"medium\"\n                        >保存</el-button\n                    >\n                </div>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { uploadImg, getAllLesson } from 'src/api/common'\nimport {\n    getBannerList,\n    delBanner,\n    getBannerDetail,\n    addBanner,\n    updateBanner\n} from 'src/api/banner'\n\nconst defaultForm = {\n    img_media_id: '',\n    img_url: '',\n    course_id: '' // 所属课程分类\n}\n\nexport default {\n    data() {\n        return {\n            action: uploadImg,\n            data: [],\n            loading: false,\n            total: 0,\n            key: '',\n            showDialog: false,\n            imgData: { media_type: 1 },\n            id: '', // 当前编辑的id\n            form: { ...defaultForm },\n            rules: {\n                course_id: {\n                    message: '请至少选择一个课程分类',\n                    required: true,\n                    trigger: ['blur']\n                },\n                // category_id: { message: '请至少选择一个所属分类', required: true, trigger: ['blur'] },\n                img_media_id: {\n                    message: '轮播图片不能为空',\n                    required: true,\n                    trigger: ['blur', 'change']\n                }\n            },\n            options: [\n                {\n                    categoryId: 1, // 分类id\n                    categoryName: '' // 分类名称\n                }\n            ],\n            loadingDetail: false,\n            btnloading: false,\n            page: 1\n        }\n    },\n    components: {},\n    methods: {\n        refreshData() {\n            this.fetchData()\n            this.showDialog = false\n        },\n        gotoAdd() {\n            this.showDialog = true\n            this.id = ''\n            this.resetForm()\n        },\n        handleCurrentChange(val) {\n            this.page = val\n            this.fetchData(val)\n        },\n        fetchData(page) {\n            if (this.loading) {\n                return\n            }\n            this.loading = true\n\n            getBannerList({\n                page: page || this.page || 1\n            })\n                .then(res => {\n                    this.data = res.data\n                    this.total = res.total\n                })\n                .catch(e => {\n                    this.$message.error(e.message)\n                })\n                .finally(() => {\n                    this.loading = false\n                })\n        },\n\n        deleteLesson(id) {\n            this.$confirm('此操作将永久删除该轮播图片, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            })\n                .then(() => {\n                    delBanner(id)\n                        .then(() => {\n                            this.$message.success('删除轮播成功')\n                            if (this.data.length === 1) {\n                                const prePage = this.page - 1\n                                this.page = prePage >= 1 ? prePage : 1\n                            }\n                            this.fetchData()\n                        })\n                        .catch(e => {\n                            this.$message.error(e.message)\n                        })\n                })\n                .catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    })\n                })\n        },\n        gotoEdit(item) {\n            this.showDialog = true\n            this.id = item.id\n            this.fetchDetail()\n        },\n        beforeUpload() {\n            //\n        },\n        onUploadSuccess(res) {\n            if (res.code === 200) {\n                this.form.img_url = res.data.media_real_url\n                this.form.img_media_id = res.data.media_id\n                this.$message.success('上传图片成功')\n            } else {\n                this.$message.error(`图片上传失败：${res.msg}`)\n            }\n        },\n        onUploadError() {\n            this.$message.error('图片上传失败')\n        },\n        save() {\n            this.$refs.form.validate(valid => {\n                if (valid) {\n                    if (this.btnloading) {\n                        return\n                    }\n                    this.btnloading = true\n                    if (!this.id) {\n                        addBanner({\n                            ...this.form\n                        })\n                            .then(() => {\n                                this.$message.success('添加成功')\n                                this.fetchData()\n                                this.showDialog = false\n                            })\n                            .catch(e => {\n                                this.$message.error(e.message)\n                            })\n                            .finally(() => {\n                                this.btnloading = false\n                            })\n                    } else {\n                        updateBanner(this.$route.params.id, this.form)\n                            .then(() => {\n                                this.$message.success('编辑成功')\n                                this.fetchData()\n                                this.showDialog = false\n                            })\n                            .catch(e => {\n                                this.$message.error(e.message)\n                            })\n                            .finally(() => {\n                                this.btnloading = false\n                            })\n                    }\n                }\n            })\n        },\n        fetchDetail() {\n            if (this.loadingDetail) {\n                return\n            }\n            this.loadingDetail = true\n\n            getBannerDetail(this.id)\n                .then(res => {\n                    this.form = {\n                        ...res\n                    }\n                    this.$refs.form.clearValidate()\n                })\n                .catch(e => {\n                    this.$message.error(e.message)\n                })\n                .finally(() => {\n                    this.loadingDetail = false\n                })\n        },\n        resetForm() {\n            this.$refs.form && this.$refs.form.resetFields()\n            this.form = { ...defaultForm }\n        }\n    },\n    created() {\n        this.fetchData()\n        getAllLesson()\n            .then(res => {\n                this.options = res\n            })\n            .catch(e => {\n                this.$message.error(e.message)\n            })\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '~assets/less/var.less';\n.lesson-form {\n    .el-input,\n    .el-textarea,\n    .el-select {\n        width: 400px;\n    }\n}\n.submit-btn {\n    margin: 30px 0 10px;\n    text-align: right;\n    button {\n        min-width: 100px;\n    }\n}\n.page-lesson-list {\n    height: 100%;\n    background-color: #fff;\n    header {\n        padding: 15px 20px;\n        text-align: right;\n        display: flex;\n        justify-content: space-between;\n        .el-input {\n            width: 300px;\n        }\n    }\n    .el-button.delete {\n        color: @color-red;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=0ce3173e&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=0ce3173e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ce3173e\",\n  null\n  \n)\n\nexport default component.exports","import xhttp from 'src/utils/xhttp'\nimport { extendUrl } from 'src/utils/httpQuery'\nimport getBaseURL from 'src/const/baseURL'\n\nconst baseURL = getBaseURL()\n\nexport const uploadImg = extendUrl(`${baseURL}/college/upload`)\n\nexport function uploadFile(params) {\n    return xhttp.post(extendUrl('/college/upload'), params)\n}\n\n// 获取所有的课程\nexport function getAllLesson() {\n    return xhttp.get(extendUrl('/lesson/all'))\n}\n"],"sourceRoot":""}