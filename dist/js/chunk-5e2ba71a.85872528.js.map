{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_array-methods.js","webpack:///./node_modules/core-js/modules/_is-array.js","webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./src/api/material.js","webpack:///./node_modules/core-js/modules/es6.array.find.js","webpack:///./src/pages/material/index.vue?e21a","webpack:///./src/pages/material/index.vue?d4b7","webpack:///src/pages/material/index.vue","webpack:///./src/pages/material/index.vue?72b0","webpack:///./src/pages/material/index.vue","webpack:///./node_modules/core-js/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/modules/_array-species-create.js","webpack:///./node_modules/core-js/modules/_array-species-constructor.js"],"names":["ctx","__webpack_require__","IObject","toObject","toLength","asc","module","exports","TYPE","$create","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","create","$this","callbackfn","that","val","res","O","self","f","length","index","result","undefined","push","cof","Array","isArray","arg","$export","$find","KEY","forced","P","F","findIndex","this","arguments","d","__webpack_exports__","saveMaterial","getMaterials","updateMaterial","src_utils_xhttp__WEBPACK_IMPORTED_MODULE_0__","params","xhttp","post","get","id","put","concat","find","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_1d026cd4_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_1d026cd4_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","suffix-icon","size","nativeOn","keyup","$event","type","indexOf","_k","keyCode","key","fetchData","model","value","callback","$$v","trim","expression","on","click","openDialog","staticStyle","color","_v","directives","name","rawName","loading","data","label-class-name","class-name","label","width","prop","min-width","scopedSlots","_u","fn","ref","row","_s","media_type","Math","ceil","scope","openEdit","pageSize","total","currentChange","handleCurrentChange","title","close-on-click-modal","visible","showDialog","update:visible","icon","selectFile","multiple","accept","change","changefile","fileList","text-inside","stroke-width","percentage","percent","status","fileSingleAction","getBtnText","deleteFileItem","fileActionAll","_e","showEditDialog","form","label-width","$set","saveEdit","staticRenderFns","materialvue_type_script_lang_js_","page","list","editFormBtn","addMaterialBtn","components","methods","actualIndex","item","pauseUpload","$delete","_saveMaterial2","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","newFileList","wrap","_context","prev","next","abrupt","forEach","show_name","media_id","material","$message","success","info","t0","stop","apply","text","updateFileItem","objectSpread","qiniu","startUpload","forceStop","_row$status","_this","_this2","files","document","getElementById","_loop","i","file","map","handleClick","_saveEdit","_callee2","_context2","error","msg","deleteMaterial","_this3","$confirm","confirmButtonText","cancelButtonText","then","catch","message","_this4","e","finally","created","pages_materialvue_type_script_lang_js_","component","componentNormalizer","$iterators","getKeys","redefine","global","hide","Iterators","wks","ITERATOR","TO_STRING_TAG","ArrayValues","DOMIterables","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","collections","NAME","explicit","Collection","proto","prototype","speciesConstructor","original","isObject","SPECIES","C","constructor"],"mappings":"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","file":"js/chunk-5e2ba71a.85872528.js","sourcesContent":["// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","import xhttp from 'src/utils/xhttp'\n\n// 保存素材到接口\nexport function saveMaterial(params) {\n    return xhttp.post('/material', params)\n}\n\n// 获取素材列表接口\nexport function getMaterials(params) {\n    return xhttp.get('/material', { params })\n}\n\n// 更新素材标题\nexport function updateMaterial(id, params) {\n    return xhttp.put(`/material/${id}`, params)\n}\n","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1d026cd4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1d026cd4&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-material-manage\"},[_c('header',[_c('el-input',{attrs:{\"placeholder\":\"请输入素材标题\",\"suffix-icon\":\"el-icon-search\",\"size\":\"medium\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.fetchData($event)}},model:{value:(_vm.key),callback:function ($$v) {_vm.key=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"key\"}}),_c('el-button',{staticClass:\"page-material-manage__add\",attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.openDialog}},[_c('a',{staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"上传素材\")])])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading.list),expression:\"loading.list\"}],attrs:{\"data\":_vm.data}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label-class-name\":\"index-col\",\"class-name\":\"index-col\",\"label\":\"序号\",\"width\":\"70\"}}),_c('el-table-column',{attrs:{\"prop\":\"show_name\",\"min-width\":\"200\",\"label\":\"素材标题\"}}),_c('el-table-column',{attrs:{\"label\":\"素材类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n                \"+_vm._s(row.media_type === 3 ? '视频' : '音频')+\"\\n            \")]}}])}),_c('el-table-column',{attrs:{\"min-width\":\"200\",\"label\":\"素材大小\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n                \"+_vm._s(Math.ceil(row.size / 1024 / 1024))+\" MB\\n            \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"created_at\",\"min-width\":\"200\",\"label\":\"创建时间\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.openEdit(scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1),_c('page-pagination',{attrs:{\"pageSize\":10,\"total\":_vm.total},on:{\"currentChange\":_vm.handleCurrentChange}}),_c('el-dialog',{staticClass:\"upload-dialog\",attrs:{\"title\":\"上传素材\",\"close-on-click-modal\":false,\"width\":\"900px\",\"visible\":_vm.showDialog},on:{\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('div',{staticClass:\"upload-dialog__tips\"},[_vm._v(\"\\n            单个素材最好不超过5G\\n        \")]),_c('div',{staticClass:\"upload-dialog__content\"},[_c('div',{attrs:{\"id\":\"uploadvideo-container\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.selectFile}},[_vm._v(\"选择文件\")]),_c('div',{staticClass:\"file-input\"},[_c('input',{attrs:{\"type\":\"file\",\"id\":\"uploadinput\",\"multiple\":\"\",\"accept\":\"video/*,audio/*\"},on:{\"change\":_vm.changefile}})])],1),_c('el-table',{attrs:{\"data\":_vm.fileList}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label-class-name\":\"index-col\",\"class-name\":\"index-col\",\"label\":\"序号\",\"width\":\"70\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"min-width\":\"100\",\"label\":\"文件名\"}}),_c('el-table-column',{attrs:{\"label\":\"文件大小\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n                        \"+_vm._s(Math.ceil(row.size / 1024 / 1024))+\" M\\n                    \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"file-action-wrapper\"},[_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":20,\"percentage\":row.percent}}),(row.status !== 'completed')?_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.fileSingleAction(row)}}},[_vm._v(_vm._s(_vm.getBtnText(row.status)))]):_c('el-button',{attrs:{\"size\":\"small\"}},[_vm._v(\"已完成\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleteFileItem(row)}}},[_vm._v(\"删除\")])],1)]}}])})],1),(_vm.fileList.length)?_c('div',{staticClass:\"batch-btn\"},[_c('div',[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.fileActionAll}},[_vm._v(\"全部开始上传\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.fileActionAll('pause')}}},[_vm._v(\"全部暂停上传\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.fileActionAll}},[_vm._v(\"全部继续上传\")])],1),_c('div',[_c('el-button',{staticClass:\"save-btn\",attrs:{\"size\":\"medium\",\"type\":\"primary\",\"loading\":_vm.loading.saveMaterial},on:{\"click\":_vm.saveMaterial}},[_vm._v(\"保存\")])],1)]):_vm._e()],1)]),_c('el-dialog',{staticClass:\"edit-dialog\",attrs:{\"title\":\"素材编辑\",\"close-on-click-modal\":false,\"width\":\"700px\",\"visible\":_vm.showEditDialog},on:{\"update:visible\":function($event){_vm.showEditDialog=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"素材标题\"}},[_c('el-input',{staticStyle:{\"width\":\"300px\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1),_c('div',{staticClass:\"clearfix\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.saveEdit}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"page-material-manage\">\n        <header>\n            <el-input\n                placeholder=\"请输入素材标题\"\n                suffix-icon=\"el-icon-search\"\n                @keyup.enter.native=\"fetchData\"\n                size=\"medium\"\n                v-model.trim=\"key\"\n            >\n            </el-input>\n            <el-button\n                type=\"primary\"\n                class=\"page-material-manage__add\"\n                @click=\"openDialog\"\n                size=\"medium\"\n            >\n                <a style=\"color: #fff\">上传素材</a>\n            </el-button>\n        </header>\n\n        <el-table :data=\"data\" v-loading=\"loading.list\">\n            <el-table-column\n                type=\"index\"\n                label-class-name=\"index-col\"\n                class-name=\"index-col\"\n                label=\"序号\"\n                width=\"70\"\n            >\n            </el-table-column>\n            <el-table-column prop=\"show_name\" min-width=\"200\" label=\"素材标题\">\n            </el-table-column>\n            <el-table-column label=\"素材类型\">\n                <template slot-scope=\"{ row }\">\n                    {{ row.media_type === 3 ? '视频' : '音频' }}\n                </template>\n            </el-table-column>\n            <el-table-column min-width=\"200\" label=\"素材大小\">\n                <template slot-scope=\"{ row }\">\n                    {{ Math.ceil(row.size / 1024 / 1024) }} MB\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"created_at\" min-width=\"200\" label=\"创建时间\">\n            </el-table-column>\n            <el-table-column label=\"操作\" min-width=\"150\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"text\" @click=\"openEdit(scope.row)\"\n                        >编辑</el-button\n                    >\n                    <!-- <el-button type=\"text\"\n                        class=\"delete\"\n                        @click=\"deleteMaterial(scope.row.id)\">删除</el-button> -->\n                </template>\n            </el-table-column>\n        </el-table>\n        <page-pagination\n            :pageSize=\"10\"\n            @currentChange=\"handleCurrentChange\"\n            :total=\"total\"\n        ></page-pagination>\n        <el-dialog\n            title=\"上传素材\"\n            :close-on-click-modal=\"false\"\n            width=\"900px\"\n            class=\"upload-dialog\"\n            :visible.sync=\"showDialog\"\n        >\n            <div class=\"upload-dialog__tips\">\n                单个素材最好不超过5G\n            </div>\n            <div class=\"upload-dialog__content\">\n                <div id=\"uploadvideo-container\">\n                    <el-button\n                        type=\"primary\"\n                        @click=\"selectFile\"\n                        size=\"medium\"\n                        icon=\"el-icon-plus\"\n                        >选择文件</el-button\n                    >\n                    <div class=\"file-input\">\n                        <input\n                            type=\"file\"\n                            id=\"uploadinput\"\n                            multiple\n                            @change=\"changefile\"\n                            accept=\"video/*,audio/*\"\n                        />\n                    </div>\n                </div>\n                <el-table :data=\"fileList\">\n                    <el-table-column\n                        type=\"index\"\n                        label-class-name=\"index-col\"\n                        class-name=\"index-col\"\n                        label=\"序号\"\n                        width=\"70\"\n                    >\n                    </el-table-column>\n                    <el-table-column prop=\"name\" min-width=\"100\" label=\"文件名\">\n                    </el-table-column>\n                    <el-table-column label=\"文件大小\">\n                        <template slot-scope=\"{ row }\">\n                            {{ Math.ceil(row.size / 1024 / 1024) }} M\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"操作\" min-width=\"300\">\n                        <template slot-scope=\"{ row }\">\n                            <div class=\"file-action-wrapper\">\n                                <el-progress\n                                    :text-inside=\"true\"\n                                    :stroke-width=\"20\"\n                                    :percentage=\"row.percent\"\n                                ></el-progress>\n                                <el-button\n                                    @click=\"fileSingleAction(row)\"\n                                    v-if=\"row.status !== 'completed'\"\n                                    size=\"small\"\n                                    >{{ getBtnText(row.status) }}</el-button\n                                >\n                                <el-button v-else size=\"small\"\n                                    >已完成</el-button\n                                >\n                                <el-button\n                                    @click=\"deleteFileItem(row)\"\n                                    size=\"small\"\n                                    >删除</el-button\n                                >\n                            </div>\n                        </template>\n                    </el-table-column>\n                </el-table>\n                <div class=\"batch-btn\" v-if=\"fileList.length\">\n                    <div>\n                        <el-button size=\"small\" @click=\"fileActionAll\"\n                            >全部开始上传</el-button\n                        >\n                        <el-button size=\"small\" @click=\"fileActionAll('pause')\"\n                            >全部暂停上传</el-button\n                        >\n                        <el-button size=\"small\" @click=\"fileActionAll\"\n                            >全部继续上传</el-button\n                        >\n                    </div>\n                    <div>\n                        <el-button\n                            size=\"medium\"\n                            type=\"primary\"\n                            class=\"save-btn\"\n                            :loading=\"loading.saveMaterial\"\n                            @click=\"saveMaterial\"\n                            >保存</el-button\n                        >\n                    </div>\n                </div>\n            </div>\n        </el-dialog>\n        <el-dialog\n            title=\"素材编辑\"\n            :close-on-click-modal=\"false\"\n            width=\"700px\"\n            class=\"edit-dialog\"\n            :visible.sync=\"showEditDialog\"\n        >\n            <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" size=\"small\">\n                <el-form-item label=\"素材标题\">\n                    <el-input\n                        style=\"width: 300px;\"\n                        v-model=\"form.name\"\n                    ></el-input>\n                </el-form-item>\n            </el-form>\n            <div class=\"clearfix\">\n                <el-button type=\"primary\" @click=\"saveEdit\" size=\"small\"\n                    >保存</el-button\n                >\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { saveMaterial, getMaterials, updateMaterial } from 'src/api/material'\nimport { qiniuUpload, pauseUpload } from 'src/utils/qiniu'\n\nexport default {\n    data() {\n        return {\n            data: [],\n            page: 1,\n            total: 0,\n            showDialog: false,\n            showEditDialog: false,\n            form: {},\n            loading: {\n                list: false,\n                editFormBtn: false,\n                addMaterialBtn: false,\n                saveMaterial: false\n            },\n            fileList: [],\n            key: ''\n        }\n    },\n    components: {},\n    methods: {\n        deleteFileItem(row) {\n            const actualIndex = this.fileList.findIndex(\n                item => item.index === row.index\n            )\n            if (actualIndex !== -1) {\n                // 先暂停上传，再删除文件\n                this.pauseUpload(row)\n                this.$delete(this.fileList, actualIndex)\n            }\n        },\n        async saveMaterial() {\n            if (this.loading.saveMaterial) {\n                return\n            }\n            this.loading.saveMaterial = true\n            try {\n                const list = []\n                const newFileList = []\n                this.fileList.forEach(item => {\n                    if (item.status === 'completed') {\n                        list.push({\n                            media_type: item.media_type,\n                            show_name: item.name,\n                            media_id: item.key\n                        })\n                    } else {\n                        // 后续只显示没有保存的文件\n                        newFileList.push(item)\n                    }\n                })\n                if (list.length) {\n                    await saveMaterial({\n                        list\n                    })\n                    this.$message.success('已经上传完成的视频保存成功')\n                    this.fileList = newFileList\n                    this.fetchData()\n                    // 全部都已经上传保存完成的情况下关闭弹窗。如果还有一个没有上传保存完成，弹窗不关闭\n                    if (!this.fileList.length) {\n                        this.showDialog = false\n                    }\n                } else {\n                    this.$message.info('没有一个素材上传成功，无法保存')\n                }\n            } catch (error) {\n                //\n            }\n            this.loading.saveMaterial = false\n        },\n        getBtnText(status) {\n            let text = '开始上传'\n            switch (status) {\n                case 'paused':\n                case 'error':\n                    text = '继续上传'\n                    break\n                case 'start':\n                    text = '暂停上传'\n                    break\n                default:\n                    break\n            }\n            return text\n        },\n        // 如果有删除某个项的话，那么就不能直接用row里面最开始注入的index了，而应该先找到这个index\n        updateFileItem(params, row) {\n            const actualIndex = this.fileList.findIndex(\n                item => item.index === row.index\n            )\n            if (actualIndex !== -1) {\n                this.$set(this.fileList, actualIndex, {\n                    ...this.fileList[actualIndex],\n                    ...params\n                })\n            }\n        },\n        pauseUpload(row) {\n            pauseUpload(row, this.updateFileItem)\n        },\n        startUpload(row) {\n            qiniuUpload(row, this.updateFileItem)\n        },\n\n        fileSingleAction(row, forceStop) {\n            const { status = null } = row\n            if (status === 'completed') return\n            if (status === 'start' || forceStop) {\n                this.pauseUpload(row)\n            } else {\n                this.updateFileItem({ status: 'start' }, row)\n                this.startUpload(row)\n            }\n        },\n        fileActionAll(type) {\n            this.fileList.forEach(item => {\n                this.fileSingleAction(item, type === 'pause')\n            })\n        },\n        changefile() {\n            const files = document.getElementById('uploadinput').files\n            const result = []\n            for (let i = 0; i < files.length; i++) {\n                const file = files[i]\n                // 同一个文件不需要操作\n                if (\n                    !this.fileList.find(\n                        item =>\n                            item.name === file.name && item.size === file.size\n                    )\n                ) {\n                    result.push({\n                        file,\n                        name: file.name,\n                        size: file.size,\n                        percent: 0,\n                        status: null\n                    })\n                }\n            }\n            this.fileList = this.fileList\n                .concat(result)\n                .map((item, i) => ({ ...item, index: i }))\n        },\n        selectFile() {\n            document.getElementById('uploadinput').click()\n        },\n        handleClick() {\n            this.page = 1\n            this.fileList = []\n            this.fetchData()\n        },\n        openDialog() {\n            this.showDialog = true\n        },\n        openEdit(row) {\n            this.form = { name: row.show_name, id: row.id }\n            this.showEditDialog = true\n        },\n        async saveEdit() {\n            if (!this.form.name) {\n                return this.$message.info('标题不能为空')\n            }\n            if (this.loading.editFormBtn) {\n                return\n            }\n            this.loading.editFormBtn = true\n            try {\n                await updateMaterial(this.form.id, {\n                    show_name: this.form.name\n                })\n                this.$message.success('修改素材标题成功')\n                this.showEditDialog = false\n                this.fetchData()\n            } catch (error) {\n                this.$message.error(error.msg || '修改素材标题失败')\n            }\n            this.loading.editFormBtn = false\n        },\n        deleteMaterial() {\n            this.$confirm('此操作将永久删除该素材, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            })\n                .then(() => {\n                    //\n                })\n                .catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    })\n                })\n        },\n\n        handleCurrentChange(val) {\n            this.page = val\n            this.fetchData(val)\n        },\n        fetchData(page) {\n            if (this.loading.list) {\n                return\n            }\n            this.loading.list = true\n\n            getMaterials({\n                page: page || this.page || 1,\n                media_type: '',\n                show_name: this.key || ''\n            })\n                .then(res => {\n                    this.data = res.data\n                    this.total = res.total\n                })\n                .catch(e => {\n                    this.$message.error(e.message)\n                })\n                .finally(() => {\n                    this.loading.list = false\n                })\n        }\n    },\n    created() {\n        this.fetchData()\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '~assets/less/var.less';\n.file-action-wrapper {\n    display: flex;\n    .el-progress {\n        width: 250px;\n        margin-right: 10px;\n    }\n}\n.upload-dialog {\n    &__content {\n        .el-table {\n            border-left: 1px solid @border-color;\n            border-right: 1px solid @border-color;\n        }\n        .batch-btn {\n            margin-top: 20px;\n            text-align: right;\n            .save-btn {\n                margin-top: 20px;\n                min-width: 200px;\n            }\n        }\n    }\n}\n#uploadvideo-container {\n    position: relative;\n    margin: 10px 0;\n    .el-button {\n        position: relative;\n        z-index: 1;\n        min-width: 140px;\n    }\n    .file-input {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 140px;\n        height: 40px;\n        overflow: hidden;\n        z-index: 0;\n        input {\n            font-size: 999px;\n            opacity: 0;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 100%;\n        }\n    }\n}\n.page-material-manage {\n    background-color: #fff;\n    header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        .el-input {\n            width: 400px;\n            margin-left: 20px;\n        }\n    }\n    &__add {\n        float: right;\n        margin: 20px;\n    }\n    .delete {\n        color: @color-red;\n    }\n}\n.edit-dialog {\n    .el-button {\n        float: right;\n        min-height: 32px;\n        min-width: 80px;\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1d026cd4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1d026cd4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d026cd4\",\n  null\n  \n)\n\nexport default component.exports","var $iterators = require('./es6.array.iterator');\nvar getKeys = require('./_object-keys');\nvar redefine = require('./_redefine');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar wks = require('./_wks');\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n"],"sourceRoot":""}